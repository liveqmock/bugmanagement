'use strict';StackExchange.tagSuggestions=function(){function m(){var a="",d;for(d in f)f.hasOwnProperty(d)&&/^t_/.test(d)&&(a+=d.replace(/^t_/," "));return $("<input type='hidden' name='tag-suggestions' />").val(a.substring(1))}function j(){k(b)}function k(a){if(g)if(l=a=a||l,a.length){!f.anything&&i.onFirstSuggestion&&i.onFirstSuggestion.call();f.anything=1;g.html("<span>suggested tags:</span>");for(var d=function(a){return RegExp("(?:^|\\s)"+a.replace(/[.+]/g,"\\$&")+"(?:$|\\s)","i").test(h.val())},
b=0;b<a.length;b++){var c=a[b];f["t_"+c]=1;var e=!d(c),c=window.tagRenderer(c,null,e?"a":"span");e&&c.click(function(a){if(!(a.ctrlKey||1!=a.which)){a.preventDefault();var b=$(this).text(),c=this;setTimeout(function(){$(c).replaceWith(window.tagRenderer(b,null,"span"))},0);d(b)?h.focus():($("#tag-menu").parent().remove(),h[0].func_add(b))}});g.append(c)}}else g.empty()}var g,h,e,i,b=[],f={},l=[];return{init:function(a){i=a||{};g=$("#tag-suggestions");h=$("#tagnames");h.change(function(){k()});e=StackExchange.helpers.DelayedReaction(j,
1E4,{sliding:!0});$("#post-form").submit(function(){$(this).find("input[name='tag-suggestions']").remove().end().append(m())});$("#wmd-input").on("keydown",function(){e.trigger()}).on("blur",function(){StackExchange.cardiologist.ensureDraftSaved(function(a){a&&a.suggestedTags&&(b=a.suggestedTags);j();e.cancel()},!0)})},suggest:function(a){b=a}}}();